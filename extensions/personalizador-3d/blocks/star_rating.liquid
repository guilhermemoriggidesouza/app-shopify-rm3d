<script
  src="https://salmon-negative-lobster-215.mypinata.cloud/ipfs/bafkreibsnneg6a2xquci64zn5ryp5jkr73yuzvoju6hlyw6i6uo6b7lqum"
  defer
></script>

{% if product.metafields.custom.rm3d_data %}
  <div
    id="produto-container-1"
    style="width:100%;height:100%;display:block"
  >
    <h3>Carregando Modelo 3D...</h3>
  </div>
{% endif %}

<script>
  {% if product.metafields.custom.rm3d_data %}
    window.addEventListener('load', function () {
      const rm3dData = JSON.parse('{{ product.metafields.custom.rm3d_data }}')
      const clientId = rm3dData.client_id
      const clientSecret = rm3dData.client_secret
      const tenant = rm3dData.tenant
      const cabecalho =rm3dData.cabecalho ?? false
      const productId = {{ product.id }}

      window.initRM3DModel({
        tenant,
        container: 'produto-container-1',
        productId,
        clientId,
        clientSecret,
        cabecalho
      });
    });
  {% endif %}
</script>

{% schema %}
{
  "name": "Personalizador 3D",
  "target": "section",
  "settings": [{ "type": "product", "id": "product", "label": "product", "autofill": true }]
}
{% endschema %}
